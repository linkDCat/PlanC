function News_Index(){var t=this;t.page=2,t.catagory_id=0,t.loadBtn=$("#load-more-btn")}News_Index.prototype.listenLoadMore=function(){var n=this;n.loadBtn.click(function(){catajax.get({url:"/news/list/",data:{p:n.page,catagory_id:n.catagory_id},success:function(t){if(200===t.code){var e=t.data;if(0<e.length){var a=template("news-item",{newses:e});$(".list-inner-group").append(a),n.page=n.page+1,console.log(n.page)}else n.loadBtn.hide()}}})})},News_Index.prototype.listenCatagorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var i=$(this),s=i.attr("data-catagory");catajax.get({url:"/news/list/",data:{p:1,catagory_id:s},success:function(t){if(200===t.code){var e=t.data,a=template("news-item",{newses:e}),n=$(".list-inner-group");n.empty(),n.append(a),o.page=2,o.catagory_id=s,i.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},News_Index.prototype.run=function(){this.listenLoadMore(),this.listenCatagorySwitchEvent()},$(function(){(new News_Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3NfaW5kZXguanMiXSwibmFtZXMiOlsiTmV3c19JbmRleCIsInNlbGYiLCJ0aGlzIiwicGFnZSIsImNhdGFnb3J5X2lkIiwibG9hZEJ0biIsIiQiLCJwcm90b3R5cGUiLCJsaXN0ZW5Mb2FkTW9yZSIsImNsaWNrIiwiY2F0YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsImxlbmd0aCIsInRwbCIsInRlbXBsYXRlIiwiYXBwZW5kIiwiY29uc29sZSIsImxvZyIsImhpZGUiLCJsaXN0ZW5DYXRhZ29yeVN3aXRjaEV2ZW50IiwiY2hpbGRyZW4iLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiLCJhZGRDbGFzcyIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJzaG93IiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxhQUNMLElBQUlDLEVBQU1DLEtBQ1ZELEVBQUtFLEtBQU8sRUFDWkYsRUFBS0csWUFBYyxFQUNuQkgsRUFBS0ksUUFBVUMsRUFBRSxrQkFHckJOLFdBQVdPLFVBQVVDLGVBQWdCLFdBQ2pDLElBQUlQLEVBQU1DLEtBQ1ZELEVBQUtJLFFBQVFJLE1BQU0sV0FDZkMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLGNBQ05DLEtBQU8sQ0FDSEMsRUFBTWIsRUFBS0UsS0FDWEMsWUFBZ0JILEVBQUtHLGFBRXpCVyxRQUFVLFNBQVVDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUMsRUFBU0QsRUFBYSxLQUMxQixHQUFvQixFQUFoQkMsRUFBT0MsT0FBVyxDQUNsQixJQUFJQyxFQUFNQyxTQUFTLFlBQVksQ0FBQ0gsT0FBU0EsSUFDaENYLEVBQUUscUJBQ1JlLE9BQU9GLEdBQ1ZsQixFQUFLRSxLQUFPRixFQUFLRSxLQUFPLEVBQ3hCbUIsUUFBUUMsSUFBSXRCLEVBQUtFLFdBRWpCRixFQUFLSSxRQUFRbUIsY0FRckN4QixXQUFXTyxVQUFVa0IsMEJBQTRCLFdBQzdDLElBQUl4QixFQUFPQyxLQUNJSSxFQUFFLGFBQ1JvQixXQUFXakIsTUFBTSxXQUN0QixJQUFJa0IsRUFBS3JCLEVBQUVKLE1BQ1BFLEVBQWN1QixFQUFHQyxLQUFLLGlCQUUxQmxCLFFBQVFDLElBQUksQ0FDUkMsSUFBTSxjQUNOQyxLQUFPLENBQ0hDLEVBSkcsRUFLSFYsWUFBY0EsR0FFbEJXLFFBQVUsU0FBVUMsR0FDaEIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRyxFQUFNQyxTQUFTLFlBQVksQ0FBQ0gsT0FBU0EsSUFDckNZLEVBQWdCdkIsRUFBRSxxQkFDdEJ1QixFQUFjQyxRQUNkRCxFQUFjUixPQUFPRixHQUNyQmxCLEVBQUtFLEtBQU8sRUFDWkYsRUFBS0csWUFBY0EsRUFDbkJ1QixFQUFHSSxTQUFTLFVBQVVDLFdBQVdDLFlBQVksVUFDN0NoQyxFQUFLSSxRQUFRNkIsY0FPakNsQyxXQUFXTyxVQUFVNEIsSUFBSyxXQUNaakMsS0FDTE0saUJBREtOLEtBRUx1Qiw2QkFHVG5CLEVBQUUsWUFDa0IsSUFBSU4sWUFDVG1DIiwiZmlsZSI6Im5ld3NfaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3c19JbmRleCgpIHtcclxuICAgIHZhciBzZWxmID10aGlzO1xyXG4gICAgc2VsZi5wYWdlID0gMjtcclxuICAgIHNlbGYuY2F0YWdvcnlfaWQgPSAwIDtcclxuICAgIHNlbGYubG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XHJcbn07XHJcblxyXG5OZXdzX0luZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZSA9ZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID10aGlzO1xyXG4gICAgc2VsZi5sb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYXRhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCcgOiBzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0YWdvcnlfaWQnIDogc2VsZi5jYXRhZ29yeV9pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gc2VsZi5wYWdlICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5wYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3c19JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0YWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKCcubGlzdC10YWInKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGFnb3J5X2lkID0gbGkuYXR0cignZGF0YS1jYXRhZ29yeScpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICBjYXRhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0YWdvcnlfaWQnOmNhdGFnb3J5X2lkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRhZ29yeV9pZCA9IGNhdGFnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3NfSW5kZXgucHJvdG90eXBlLnJ1biA9ZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPXRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlKCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGFnb3J5U3dpdGNoRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3NfaW5kZXggPW5ldyBOZXdzX0luZGV4KCk7XHJcbiAgICBuZXdzX2luZGV4LnJ1bigpO1xyXG59KTsiXX0=
