function News(){}News.prototype.run=function(){var t=this;t.listenUploadFileEvent(),t.initUeditor(),t.listenSubmitEvent()},News.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),catajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$("input[name='title']").val(),n=$("select[name='catagory']").val(),i=$("input[name='thumbnail']").val(),a=$("input[name='desc']").val(),o=window.ue.getContent(),l=$(this).attr("data-news-id");if(console.log(l),l)var c="/cms/edit_news/";else c="/cms/write_news/";catajax.post({url:c,data:{title:e,desc:a,thumbnail:i,catagory:n,content:o,pk:l},success:function(t){200===t.code&&catalert.alertSuccess("新闻发布成功!",function(){window.location.reload()})}})})},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsInJ1biIsInNlbGYiLCJ0aGlzIiwibGlzdGVuVXBsb2FkRmlsZUV2ZW50IiwiaW5pdFVlZGl0b3IiLCJsaXN0ZW5TdWJtaXRFdmVudCIsIndpbmRvdyIsInVlIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJ1cGxvYWRCdG4iLCIkIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImNhdGFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRhZ29yeSIsInRodW1ibmFpbCIsImRlc2MiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInBrIiwiYXR0ciIsImNvbnNvbGUiLCJsb2ciLCJjYXRhbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUlUQSxLQUFLQyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlDLEVBQU1DLEtBQ1ZELEVBQUtFLHdCQUNMRixFQUFLRyxjQUNMSCxFQUFLSSxxQkFHVFAsS0FBS0MsVUFBVUssWUFBYyxXQUN6QkUsT0FBT0MsR0FBSUMsR0FBR0MsVUFBVSxTQUFTLENBQzdCQyxtQkFBcUIsSUFDckJDLFVBQWEsc0JBS3JCYixLQUFLQyxVQUFVSSxzQkFBd0IsV0FDbkMsSUFBSVMsRUFBWUMsRUFBRSxrQkFDbEJELEVBQVVFLE9BQU8sV0FDYixJQUFJQyxFQUFPSCxFQUFVLEdBQUdJLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBT0osR0FDdkJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTSxvQkFDTkMsS0FBT04sRUFDUE8sYUFBYyxFQUNkQyxhQUFjLEVBQ2RDLFFBQVUsU0FBVUMsR0FDaEIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVSxDQUV2QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGQsRUFBRSxtQkFDUmUsSUFBSU4sVUFPdkN4QixLQUFLQyxVQUFVTSxrQkFBb0IsV0FDZlEsRUFBRSxlQUNSZ0IsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBRU4sSUFBSUMsRUFBUW5CLEVBQUUsdUJBQXVCZSxNQUNqQ0ssRUFBV3BCLEVBQUUsMkJBQTJCZSxNQUN4Q00sRUFBV3JCLEVBQUUsMkJBQTJCZSxNQUN4Q08sRUFBT3RCLEVBQUUsc0JBQXNCZSxNQUMvQlEsRUFBVTlCLE9BQU9DLEdBQUc4QixhQUdwQkMsRUFETXpCLEVBQUVYLE1BQ0NxQyxLQUFLLGdCQUVsQixHQURBQyxRQUFRQyxJQUFJSCxHQUNSQSxFQUNBLElBQUloQixFQUFNLHVCQUVOQSxFQUFNLG1CQUdkRixRQUFRQyxLQUFLLENBQ1RDLElBQU1BLEVBQ05DLEtBQU8sQ0FDSFMsTUFBUUEsRUFDUkcsS0FBT0EsRUFDUEQsVUFBWUEsRUFDWkQsU0FBV0EsRUFDWEcsUUFBVUEsRUFDVkUsR0FBS0EsR0FFVFosUUFBVyxTQUFVQyxHQUNLLE1BQW5CQSxFQUFhLE1BQ1plLFNBQVNDLGFBQWEsVUFBVSxXQUM1QnJDLE9BQU9zQyxTQUFTQyxpQkFReENoQyxFQUFFLFlBQ2EsSUFBSWYsTUFDVkUiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xyXG5cclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID10aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIHNlbGYuaW5pdFVlZGl0b3IoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmluaXRVZWRpdG9yID0gZnVuY3Rpb24oKXtcclxuICAgIHdpbmRvdy51ZSA9VUUuZ2V0RWRpdG9yKCdlZGl0b3InLHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0Jzo0MDAsXHJcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJyxcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsZmlsZSk7XHJcbiAgICAgICAgY2F0YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOmZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOmZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOmZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdFsnZGF0YSddKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcjc3VibWl0LWJ0bicpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRhZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0YWdvcnknXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0kKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgdmFyIEJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gQnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKTtcclxuICAgICAgICBpZiAocGspe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9jbXMvZWRpdF9uZXdzLyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvY21zL3dyaXRlX25ld3MvJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhdGFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOnVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6dGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOnRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjYXRhZ29yeSc6Y2F0YWdvcnksXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6Y29udGVudCxcclxuICAgICAgICAgICAgICAgICdwayc6cGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxlcnQuYWxlcnRTdWNjZXNzKCfmlrDpl7vlj5HluIPmiJDlip8hJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICBuZXdzLnJ1bigpO1xyXG59KTsiXX0=
